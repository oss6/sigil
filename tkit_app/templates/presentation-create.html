<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=1024, user-scalable=no">

    <title>Tkit - Strumento di presentazione</title>

    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link rel="stylesheet" media="screen" href="/static/css/deck.core.css">
    <link rel="stylesheet" media="screen" href="/static/css/deck.navigation.css">
    <link rel="stylesheet" media="screen" href="/static/css/deck.status.css">
    <link rel="stylesheet" media="screen" href="/static/css/web-2.0.css">
    <link rel="stylesheet" media="screen" href="/static/css/horizontal-slide.css">
    <link rel="stylesheet" type="text/css" href="/static/css/popline-def.css">
    <link rel="stylesheet" type="text/css" href="/static/css/toggle-switch.css">

    <script src="/static/js/modernizr.custom.js"></script>
</head>
<body>
    <div id="menu-trigger"></div>
    <div id="menu">
        <h4>Menu degli strumenti</h4>
        <button class="btn btn-success" id="new-slide">Nuova diapositiva</button>
        <button class="btn btn-success" id="delete-current-slide">Elimina diapositiva</button>
        <form action="." method="post">{% csrf_token %}
            <input type="text" id="html-file-name" placeholder="Nome file">
            <input type="text" id="pres-title" placeholder="Titolo presentazione">
            <input type="text" id="pres-desc" placeholder="Descrizione presentazione">
            <button id="save-pres">Salva</button>
        </form>

        <div class="switcher">
            <h4>Modalit√†</h4>

            <div class="switch-toggle candy blue">
                <input id="edit" name="mode" type="radio" checked="">
                <label for="edit">Modifica</label>

                <input id="view" name="mode" type="radio">
                <label for="view">Pres.</label>

                <a></a>
            </div>

            <h4>Layout</h4>

            <div class="switch-toggle candy blue">
                <input id="fixed" name="position" type="radio" checked="">
                <label for="fixed">Fixed</label>

                <input id="relative" name="position" type="radio">
                <label for="relative">Relative</label>

                <a></a>
            </div>
        </div>
    </div>

    <div class="deck-container">
        <!-- Begin slides. Just make elements with a class of slide. -->

        <section class="slide editor" contenteditable="true">
            <h2>Titolo</h2>

            <p>
                Contenuto
            </p>
        </section>

        <!-- End slides. -->

        <!-- Begin extension snippets. Add or remove as needed. -->

        <!-- deck.navigation snippet -->
        <div aria-role="navigation">
            <a href="#" class="deck-prev-link" title="Previous">&#8592;</a>
            <a href="#" class="deck-next-link" title="Next">&#8594;</a>
        </div>

        <!-- deck.status snippet -->
        <p class="deck-status" aria-role="status">
            <span class="deck-status-current"></span>
            /
            <span class="deck-status-total"></span>
        </p>

        <!-- End extension snippets. -->
    </div>

    <!-- Required JS files. -->
    <script src="/static/js/jquery.min.js"></script>
    <script src="/static/js/jquery.popline.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.link.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.blockquote.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.decoration.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.list.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.justify.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.blockformat.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.social.js"></script>
    <script type="text/javascript" src="/static/js/popline-plugins/jquery.popline.backcolor.js"></script>
    <script src="/static/js/deck.core.js"></script>

    <!-- Extension JS files. Add or remove as needed. -->
    <script src="/static/js/deck.status.js"></script>
    <script src="/static/js/deck.navigation.js"></script>
    <!--<script src="/static/js/base.js"></script>-->

    <!-- Initialize the deck. You can put this in an external file if desired. -->
    <script>
          $(function() {
            var menu_toggle = false;

            $(".editor").popline();
            $("input[name='mode']").click(function(){
                $(".editor").popline("destroy");
                $(".editor").attr("contenteditable", this.id === "edit");
                $(".editor").popline({mode: this.id, position: $("input[name='position']:checked").attr("id")});
              });
              $("input[name='position']").click(function(){
                $(".editor").popline("setPosition", this.id);
              });

            $.deck('.slide');

            $("#menu-trigger").click(function() {
                if (!menu_toggle) {
                    $("#menu").css("right", 0);
                    $(this).css("right", 200);
                }
                else {
                    $("#menu").css("right", -210);
                    $(this).css("right", 0);
                }

                menu_toggle = !menu_toggle;
            });

            $("#new-slide").click(function() {
                var n =$(".slide").length - 1;
                $('<section id="slide-' + (n + 1) + '" class="slide editor deck-after" contenteditable="true"><h2>Titolo</h2><p>Contenuto</p></section>').insertAfter("#slide-" + n);
                $.deck('.slide');
            });

            $("#delete-current-slide").click(function() {

            });

            $("#save-pres").click(function() {
                utils.postData("/presentation/save/", {
                    csrfmiddlewaretoken: document.getElementsByName('csrfmiddlewaretoken')[0].value,
                    html_data: $("#menu").html(),
                    file_name: $("#html-file-name").val(),
                    title: $("#pres-title").val(),
                    description: $("#pres-desc").val()
                }, "/presentation/");
            });
          });

    </script>
</body>
</html>